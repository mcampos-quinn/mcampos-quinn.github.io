---
layout: post
title:  "Dumping video derivatives into Drive with Google's APIs"
date:   2020-03-12
tags: metadata google drive api ffmpeg
---

# Using the Google Drive API to load video derivatives quickly and dirtily

I've been playing around with the different Google APIs recently, partly out of curiosity and partly out of necessity. Probably the most incredible thing about them is their vast scale (I guess that isn't so surprising) and how labyrinthine the documentation can be. As someone who had never used the Google APIs before a few weeks ago, it took a lot of head bashing and staring blankly through my computer screen before I started to get the hang of how Google structures the different APIs, and how to interact with them in Python (and, against my better judgement, Ruby).

I'll try to describe here how to set up a project in Google that you can use to work with the APIsâ€“how to enable the different APIs (Drive, Docs, Sheets, and dozens of others each have their own API), authenticate, and write code that does something useful with them, hopefully more or less efficiently.

## TVTV

As part of an NEH grant, we have digitized hundreds of 1/2-inch open reel videotapes from the 1972 political conventions, and we now need our scholarly hired guns to access the derivatives so they can write some contextual pieces for the project's official launch (hopefully before the elections!). Of course, the derivatives will all be streaming on Archive.org eventually, but we aren't there yet internally and just need to get some version of the videos in place for the writers. Of course they are busy with their own schedules and one lives across the country, so streaming was the only viable option... but where?

UC Berkeley has a deal with Google to give us unlimited storage (probably to fuel the coming SkyNet AI revolution), so Drive was a natural choice. Using the UI was clearly a waste of time at this scale, so why not code something that creates low rez (but still legible) copies of the videos and in the same breath also uploads them?

## ffmprovisr

First, a shoutout to ffmprovisr, which I use basically any time I need to do something with FFmpeg. I'm so bad at remembering each detail of the different commands I use on a regular basis, but with this cookbook I can devote my precious, dwindling brain reserves to more grandiose efforts.

## Setting up a Drive project

## Setting up authentication & a reusable token

## The Python Drive API client

Installation, using the example code
Known bugs

## Structure of each API call & response

What is a response object
What is needed to work effectively with files on drive
What are the elements of a Drive object

## Making it go



## What's next
